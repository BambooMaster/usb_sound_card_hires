/*
 * The MIT License (MIT)
 *
 * Copyright (c) 2025 BambooMaster
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

/**
 * @file fir.h
 * @author BambooMaster (https://misskey.hakoniwa-project.com/@BambooMaster)
 * @brief usb_sound_card_hires
 * @version 0.4-interpolation
 * @date 2025-04-22
 * 
 */

#ifndef FIR_H
#define FIR_H

#define FIR_1ST_140DB_TAPS 430
#define FIR_2ND_140DB_TAPS 60
#define FIR_1ST_BLOCK_SIZE (48 + 1)
#define FIR_2ND_BLOCK_SIZE (FIR_1ST_BLOCK_SIZE * 2)

#define FIR_1ST_140DB_96_TAPS 262
#define FIR_2ND_140DB_96_TAPS 30
#define FIR_1ST_96_BLOCK_SIZE (96 + 1)
#define FIR_2ND_96_BLOCK_SIZE (FIR_1ST_96_BLOCK_SIZE * 2)

static const float fir_1st_140db[FIR_1ST_140DB_TAPS] = {
  -2.089216764e-07,-1.004143201e-06,-1.604388217e-06, -9.6482961e-07,5.694759011e-07,
  9.712324527e-07,-3.762601182e-07,-1.170426344e-06,2.165115944e-07,1.474486453e-06,
  3.604396781e-08,-1.82115798e-06,-4.145882997e-07,2.175283043e-06,9.458504451e-07,
  -2.494830824e-06,-1.640985261e-06,2.743501682e-06,2.514567541e-06,-2.870465096e-06,
  -3.564659664e-06,2.828440302e-06,4.789325885e-06,-2.556212394e-06,-6.166399544e-06,
  1.997945219e-06,7.669416846e-06,-1.087468718e-06,-9.248377864e-06,-2.316477747e-07,
  1.084570795e-05,2.020447482e-06,-1.237800279e-05,-4.323963367e-06,1.375272132e-05,
  7.183948583e-06,-1.485184112e-05,-1.061857347e-05,1.554906521e-05,1.463371427e-05,
  -1.569602864e-05,-1.920304021e-05,1.514077212e-05,2.427940672e-05,-1.371604594e-05,
  -2.977503391e-05,1.125986182e-05,3.557407399e-05,-7.605741757e-06,-4.151402754e-05,
  2.604956535e-06,4.739949145e-05,3.880747954e-06,-5.298670294e-05,-1.195630193e-05,
  5.799858263e-05,2.169821528e-05,-6.211346772e-05,-3.313199704e-05,6.498251605e-05,
  4.623591303e-05,-6.622285582e-05,-6.091948671e-05,6.543794734e-05,7.702744188e-05,
  -6.221553485e-05,-9.432085062e-05,5.615072223e-05,0.0001124824848,-4.684854866e-05,
  -0.0001311019878,3.394970554e-05,0.0001496844634,-1.713668098e-05,-0.0001676406828,
  -3.838109478e-06, 0.000184301578,2.914591278e-05,-0.0001989118318,-5.88481962e-05,
  0.0002106575121,9.289905574e-05,-0.000218656729,-0.0001311035303,0.0002220020397,
  0.0001731260418,-0.0002197608264,-0.0002184627519,0.0002110079222,0.0002664352069,
  -0.0001948509598,-0.0003161820641, 0.000170463376,0.0003666617558,-0.0001371101389,
  -0.0004166488652,9.418595437e-05, 0.000464745448,-4.12460904e-05,-0.0005093912478,
  -2.195641537e-05,0.0005488854367,9.544046043e-05,-0.0005814090837,-0.0001789631788,
  0.0006050585071,0.0002719935146,-0.0006178806652,-0.0003736866056,0.0006179165794,
  0.0004828647943,-0.0006032487727,-0.0005980042624, 0.000572053541,0.0007172285113,
  -0.0005226565409,-0.0008383097593,0.0004535910557,0.0009586780216,-0.0003636586189,
    -0.0010754416,0.0002519867849, 0.001185412519,-0.0001180915133, -0.00128514797,
  -3.807137182e-05, 0.001370993443,0.0002160489967,-0.001439144486,-0.0004148505104,
   0.001485706889,0.0006329021417,-0.001506776083,-0.0008680224419, 0.001498511876,
   0.001117394655,-0.001457231469,-0.001377563342, 0.001379494555, 0.001644428703,
  -0.001262203907,-0.001913268119, 0.001102694077, 0.002178754425,-0.0008988337358,
  -0.002435004339,0.0006491100648, 0.002675622003,-0.0003527257068,-0.002893772209,
  9.670874533e-06, 0.003082246287,0.0003791921481,-0.003233558498,-0.0008120764978,
   0.003340026597, 0.001286203857,-0.003393885214,-0.001797777601, 0.003387373639,
   0.002341937739,-0.003312854562,-0.002912759548, 0.003162899055, 0.003503234824,
  -0.002930393443,-0.004105289932, 0.002608608454, 0.004709787201,-0.002191277687,
  -0.005306557287, 0.001672625542, 0.005884404294,-0.001047394238,-0.006431128364,
  0.0003108021047, 0.006933510303,0.0005415211781,-0.007377285045,-0.001513696159,
   0.007747041993, 0.002609815216,-0.008026073687,-0.003834319534, 0.008196074516,
   0.005192518234, -0.00823668018,-0.006691391114, 0.008124696091,  0.00834073592,
  -0.007832895964, -0.01015494298, 0.007328057662,  0.01215569489,-0.006567792036,
   -0.01437633019, 0.005495172925,  0.01686911099,-0.004029401578, -0.01971805468,
   0.002048596973,  0.02306303568,0.0006439908757, -0.02714892477,-0.004392530303,
    0.03243652731, 0.009863602929, -0.03989083692, -0.01854440384,  0.05189775676,
    0.03456939012, -0.07632326335, -0.07531489432,   0.1630446017,   0.4362627566,
     0.4362627566,   0.1630446017, -0.07531489432, -0.07632326335,  0.03456939012,
    0.05189775676, -0.01854440384, -0.03989083692, 0.009863602929,  0.03243652731,
  -0.004392530303, -0.02714892477,0.0006439908757,  0.02306303568, 0.002048596973,
   -0.01971805468,-0.004029401578,  0.01686911099, 0.005495172925, -0.01437633019,
  -0.006567792036,  0.01215569489, 0.007328057662, -0.01015494298,-0.007832895964,
    0.00834073592, 0.008124696091,-0.006691391114, -0.00823668018, 0.005192518234,
   0.008196074516,-0.003834319534,-0.008026073687, 0.002609815216, 0.007747041993,
  -0.001513696159,-0.007377285045,0.0005415211781, 0.006933510303,0.0003108021047,
  -0.006431128364,-0.001047394238, 0.005884404294, 0.001672625542,-0.005306557287,
  -0.002191277687, 0.004709787201, 0.002608608454,-0.004105289932,-0.002930393443,
   0.003503234824, 0.003162899055,-0.002912759548,-0.003312854562, 0.002341937739,
   0.003387373639,-0.001797777601,-0.003393885214, 0.001286203857, 0.003340026597,
  -0.0008120764978,-0.003233558498,0.0003791921481, 0.003082246287,9.670874533e-06,
  -0.002893772209,-0.0003527257068, 0.002675622003,0.0006491100648,-0.002435004339,
  -0.0008988337358, 0.002178754425, 0.001102694077,-0.001913268119,-0.001262203907,
   0.001644428703, 0.001379494555,-0.001377563342,-0.001457231469, 0.001117394655,
   0.001498511876,-0.0008680224419,-0.001506776083,0.0006329021417, 0.001485706889,
  -0.0004148505104,-0.001439144486,0.0002160489967, 0.001370993443,-3.807137182e-05,
   -0.00128514797,-0.0001180915133, 0.001185412519,0.0002519867849,  -0.0010754416,
  -0.0003636586189,0.0009586780216,0.0004535910557,-0.0008383097593,-0.0005226565409,
  0.0007172285113, 0.000572053541,-0.0005980042624,-0.0006032487727,0.0004828647943,
  0.0006179165794,-0.0003736866056,-0.0006178806652,0.0002719935146,0.0006050585071,
  -0.0001789631788,-0.0005814090837,9.544046043e-05,0.0005488854367,-2.195641537e-05,
  -0.0005093912478,-4.12460904e-05, 0.000464745448,9.418595437e-05,-0.0004166488652,
  -0.0001371101389,0.0003666617558, 0.000170463376,-0.0003161820641,-0.0001948509598,
  0.0002664352069,0.0002110079222,-0.0002184627519,-0.0002197608264,0.0001731260418,
  0.0002220020397,-0.0001311035303,-0.000218656729,9.289905574e-05,0.0002106575121,
  -5.88481962e-05,-0.0001989118318,2.914591278e-05, 0.000184301578,-3.838109478e-06,
  -0.0001676406828,-1.713668098e-05,0.0001496844634,3.394970554e-05,-0.0001311019878,
  -4.684854866e-05,0.0001124824848,5.615072223e-05,-9.432085062e-05,-6.221553485e-05,
  7.702744188e-05,6.543794734e-05,-6.091948671e-05,-6.622285582e-05,4.623591303e-05,
  6.498251605e-05,-3.313199704e-05,-6.211346772e-05,2.169821528e-05,5.799858263e-05,
  -1.195630193e-05,-5.298670294e-05,3.880747954e-06,4.739949145e-05,2.604956535e-06,
  -4.151402754e-05,-7.605741757e-06,3.557407399e-05,1.125986182e-05,-2.977503391e-05,
  -1.371604594e-05,2.427940672e-05,1.514077212e-05,-1.920304021e-05,-1.569602864e-05,
  1.463371427e-05,1.554906521e-05,-1.061857347e-05,-1.485184112e-05,7.183948583e-06,
  1.375272132e-05,-4.323963367e-06,-1.237800279e-05,2.020447482e-06,1.084570795e-05,
  -2.316477747e-07,-9.248377864e-06,-1.087468718e-06,7.669416846e-06,1.997945219e-06,
  -6.166399544e-06,-2.556212394e-06,4.789325885e-06,2.828440302e-06,-3.564659664e-06,
  -2.870465096e-06,2.514567541e-06,2.743501682e-06,-1.640985261e-06,-2.494830824e-06,
  9.458504451e-07,2.175283043e-06,-4.145882997e-07,-1.82115798e-06,3.604396781e-08,
  1.474486453e-06,2.165115944e-07,-1.170426344e-06,-3.762601182e-07,9.712324527e-07,
  5.694759011e-07, -9.6482961e-07,-1.604388217e-06,-1.004143201e-06,-2.089216764e-07
};

static const float fir_2nd_140db[FIR_2ND_140DB_TAPS] = {
  1.870122901e-06,8.480215911e-06,1.937292654e-05,2.221975956e-05,-9.930537999e-06,
  -0.0001009457555,-0.0002296022576,-0.0002904735156,-0.0001144403141,0.0004074455937,
   0.001133608632,  0.00156455359, 0.001010174281,-0.0009066444472,-0.003641256131,
  -0.005514659919,-0.004366964102,0.0009390793857, 0.008933659643,  0.01514073927,
    0.01382293925, 0.001610331354,  -0.0187804345, -0.03731160611, -0.03963897377,
   -0.01384411566,  0.04220733792,   0.1171014383,   0.1885810345,   0.2322415262,
     0.2322415262,   0.1885810345,   0.1171014383,  0.04220733792, -0.01384411566,
   -0.03963897377, -0.03731160611,  -0.0187804345, 0.001610331354,  0.01382293925,
    0.01514073927, 0.008933659643,0.0009390793857,-0.004366964102,-0.005514659919,
  -0.003641256131,-0.0009066444472, 0.001010174281,  0.00156455359, 0.001133608632,
  0.0004074455937,-0.0001144403141,-0.0002904735156,-0.0002296022576,-0.0001009457555,
  -9.930537999e-06,2.221975956e-05,1.937292654e-05,8.480215911e-06,1.870122901e-06
};

static const float fir_1st_140db_96[FIR_1ST_140DB_96_TAPS] = {
  -2.494936702e-08,-7.458525602e-07,-1.859208965e-06,-1.671205155e-06,5.812087238e-07,
   2.10203234e-06,-5.749440746e-08,-2.98808186e-06,-9.851991081e-07,3.900649062e-06,
  2.723593525e-06,-4.541419457e-06,-5.240091468e-06,4.567899396e-06,8.527193131e-06,
  -3.57668273e-06,-1.245027852e-05,1.124964115e-06,1.671016071e-05,3.226971103e-06,
  -2.081345701e-05,-9.855869394e-06,2.405790838e-05,1.900074312e-05,-2.55382547e-05,
  -3.067932994e-05,2.417885298e-05,4.460176206e-05,-1.879643787e-05,-6.009044228e-05,
  8.195519513e-06,7.601652032e-05,8.704387255e-06,-9.076468996e-05,-3.271388778e-05,
  0.0001022374854, 6.41997467e-05,-0.0001079096473,-0.0001029033301,0.0001049404382,
  0.0001477674377,-9.03488617e-05,-0.0001967901044,6.125062646e-05,0.0002469265892,
  -1.515041731e-05,-0.0002940592531,-4.972389797e-05,0.0003330539039,0.0001340638701,
  -0.0003579182667,-0.000237125234,0.0003620724892,0.0003564050712,-0.0003387337201,
  -0.0004873858124, 0.000281408953,0.0006233805907,-0.0001844778744,-0.0007555138436,
  4.383984196e-05,0.0008728651446,0.0001424129296,-0.0009627979016,-0.0003733405902,
   0.001011483371,0.0006445708568,-0.001004618709,-0.000947838882,0.0009283238323,
    0.00127070758,-0.0007701843861,-0.001596518094,0.0005203943001, 0.001904611243,
  -0.0001729382784,-0.002170847729,-0.0002732555731, 0.002368439687,0.0008132688235,
  -0.002469087485,-0.001435333164, 0.002444396494, 0.002120235469,-0.002267518314,
  -0.002841052599, 0.001914953697, 0.003563265083,-0.001368430676,-0.004245276097,
  0.0006167765823, 0.004839366768,0.0003423534799, -0.00529301865,-0.001500941347,
   0.005550586618, 0.002839390188,-0.005555207841,-0.004325671587, 0.005250829738,
   0.005914873909,-0.004584183451,-0.007549135014, 0.003506500507, 0.009157868102,
  -0.001974703046,  -0.0106581049,-4.828062083e-05,  0.01195461489, 0.002594577614,
   -0.01293922495,-0.005694593303,  0.01348828059,   0.0093837725, -0.01345629245,
   -0.01371558011,  0.01266176719,  0.01878645644, -0.01085629128, -0.02478644438,
   0.007654590067,  0.03211228177,-0.002361659426, -0.04165824875,-0.006523828022,
    0.05573593825,  0.02313528024, -0.08213665336, -0.06483259052,   0.1706659198,
     0.4270663261,   0.4270663261,   0.1706659198, -0.06483259052, -0.08213665336,
    0.02313528024,  0.05573593825,-0.006523828022, -0.04165824875,-0.002361659426,
    0.03211228177, 0.007654590067, -0.02478644438, -0.01085629128,  0.01878645644,
    0.01266176719, -0.01371558011, -0.01345629245,   0.0093837725,  0.01348828059,
  -0.005694593303, -0.01293922495, 0.002594577614,  0.01195461489,-4.828062083e-05,
    -0.0106581049,-0.001974703046, 0.009157868102, 0.003506500507,-0.007549135014,
  -0.004584183451, 0.005914873909, 0.005250829738,-0.004325671587,-0.005555207841,
   0.002839390188, 0.005550586618,-0.001500941347, -0.00529301865,0.0003423534799,
   0.004839366768,0.0006167765823,-0.004245276097,-0.001368430676, 0.003563265083,
   0.001914953697,-0.002841052599,-0.002267518314, 0.002120235469, 0.002444396494,
  -0.001435333164,-0.002469087485,0.0008132688235, 0.002368439687,-0.0002732555731,
  -0.002170847729,-0.0001729382784, 0.001904611243,0.0005203943001,-0.001596518094,
  -0.0007701843861,  0.00127070758,0.0009283238323,-0.000947838882,-0.001004618709,
  0.0006445708568, 0.001011483371,-0.0003733405902,-0.0009627979016,0.0001424129296,
  0.0008728651446,4.383984196e-05,-0.0007555138436,-0.0001844778744,0.0006233805907,
   0.000281408953,-0.0004873858124,-0.0003387337201,0.0003564050712,0.0003620724892,
  -0.000237125234,-0.0003579182667,0.0001340638701,0.0003330539039,-4.972389797e-05,
  -0.0002940592531,-1.515041731e-05,0.0002469265892,6.125062646e-05,-0.0001967901044,
  -9.03488617e-05,0.0001477674377,0.0001049404382,-0.0001029033301,-0.0001079096473,
   6.41997467e-05,0.0001022374854,-3.271388778e-05,-9.076468996e-05,8.704387255e-06,
  7.601652032e-05,8.195519513e-06,-6.009044228e-05,-1.879643787e-05,4.460176206e-05,
  2.417885298e-05,-3.067932994e-05,-2.55382547e-05,1.900074312e-05,2.405790838e-05,
  -9.855869394e-06,-2.081345701e-05,3.226971103e-06,1.671016071e-05,1.124964115e-06,
  -1.245027852e-05,-3.57668273e-06,8.527193131e-06,4.567899396e-06,-5.240091468e-06,
  -4.541419457e-06,2.723593525e-06,3.900649062e-06,-9.851991081e-07,-2.98808186e-06,
  -5.749440746e-08, 2.10203234e-06,5.812087238e-07,-1.671205155e-06,-1.859208965e-06,
  -7.458525602e-07,-2.494936702e-08
};

static const float fir_2nd_140db_96[FIR_2ND_140DB_96_TAPS] = {
  4.049320705e-05,0.0001072693631,-0.000224853793,-0.0008675416466,0.0005150993238,
   0.003730931086,-0.000112504189, -0.01136132795,-0.003602557583,  0.02781599946,
    0.01694360934, -0.06133735925, -0.05959270895,   0.1600178778,   0.4279259443,
     0.4279259443,   0.1600178778, -0.05959270895, -0.06133735925,  0.01694360934,
    0.02781599946,-0.003602557583, -0.01136132795,-0.000112504189, 0.003730931086,
  0.0005150993238,-0.0008675416466,-0.000224853793,0.0001072693631,4.049320705e-05
};

void dsp_init(void);
void __not_in_flash_func(core0_task)(void);
void __not_in_flash_func(core1_main)(void);

#endif
